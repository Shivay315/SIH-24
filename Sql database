CREATE DATABASE dtc_transport;

-- Use the database
USE dtc_transport;

-- Create a table for bus routes
CREATE TABLE routes (
  id INT PRIMARY KEY,
  route_number VARCHAR(10) NOT NULL,
  route_name VARCHAR(50) NOT NULL,
  start_point VARCHAR(50) NOT NULL,
  end_point VARCHAR(50) NOT NULL,
  distance DECIMAL(10, 2) NOT NULL,
  duration INT NOT NULL
);

-- Create a table for bus stops
CREATE TABLE stops (
  id INT PRIMARY KEY,
  stop_name VARCHAR(50) NOT NULL,
  latitude DECIMAL(10, 8) NOT NULL,
  longitude DECIMAL(11, 8) NOT NULL,
  route_id INT NOT NULL,
  FOREIGN KEY (route_id) REFERENCES routes(id)
);

-- Create a table for buses
CREATE TABLE buses (
  id INT PRIMARY KEY,
  bus_number VARCHAR(10) NOT NULL,
  bus_type VARCHAR(20) NOT NULL,
  capacity INT NOT NULL,
  route_id INT NOT NULL,
  FOREIGN KEY (route_id) REFERENCES routes(id)
);

-- Create a table for drivers
CREATE TABLE drivers (
  id INT PRIMARY KEY,
  driver_name VARCHAR(50) NOT NULL,
  license_number VARCHAR(20) NOT NULL,
  contact_number VARCHAR(15) NOT NULL,
  bus_id INT NOT NULL,
  FOREIGN KEY (bus_id) REFERENCES buses(id)
);

-- Create a table for schedules
CREATE TABLE schedules (
  id INT PRIMARY KEY,
  bus_id INT NOT NULL,
  route_id INT NOT NULL,
  departure_time TIME NOT NULL,
  arrival_time TIME NOT NULL,
  frequency INT NOT NULL,
  FOREIGN KEY (bus_id) REFERENCES buses(id),
  FOREIGN KEY (route_id) REFERENCES routes(id)
);

-- Create a table for fares
CREATE TABLE fares (
  id INT PRIMARY KEY,
  route_id INT NOT NULL,
  fare DECIMAL(10, 2) NOT NULL,
  FOREIGN KEY (route_id) REFERENCES routes(id)
);

-- Create a table for payments
CREATE TABLE payments (
  id INT PRIMARY KEY,
  passenger_name VARCHAR(50) NOT NULL,
  payment_method VARCHAR(20) NOT NULL,
  amount DECIMAL(10, 2) NOT NULL,
  schedule_id INT NOT NULL,
  FOREIGN KEY (schedule_id) REFERENCES schedules(id)
);

-- Insert sample data into the tables
INSERT INTO routes (id, route_number, route_name, start_point, end_point, distance, duration)
VALUES
  (1, '101', 'Delhi to Noida', 'Delhi', 'Noida', 20.5, 45),
  (2, '102', 'Delhi to Gurgaon', 'Delhi', 'Gurgaon', 30.2, 60),
  (3, '103', 'Delhi to Faridabad', 'Delhi', 'Faridabad', 25.1, 50);

INSERT INTO stops (id, stop_name, latitude, longitude, route_id)
VALUES
  (1, 'Delhi Bus Stand', 28.7041, 77.1025, 1),
  (2, 'Noida Bus Stand', 28.5355, 77.3910, 1),
  (3, 'Gurgaon Bus Stand', 28.4595, 77.0266, 2),
  (4, 'Faridabad Bus Stand', 28.4089, 77.3178, 3);

INSERT INTO buses (id, bus_number, bus_type, capacity, route_id)
VALUES
  (1, 'DL1PC1234', 'AC', 50, 1),
  (2, 'DL1PC5678', 'Non-AC', 60, 2),
  (3, 'DL1PC9012', 'AC', 55, 3);

INSERT INTO drivers (id, driver_name, license_number, contact_number, bus_id)
VALUES
  (1, 'Rajesh Kumar', 'DL123456', '9876543210', 1),
  (2, 'Amit Singh', 'DL789012', '9812345678', 2),
  (3, 'Rahul Sharma', 'DL345678', '9712345678', 3);
